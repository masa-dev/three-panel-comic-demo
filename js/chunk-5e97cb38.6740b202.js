(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e97cb38"],{"4ebe":function(e,r,n){"use strict";n.r(r);var t=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{attrs:{id:"group"}},[n("h2",[e._v("グループ")]),!0===e.group.isJoin?n("div",[n("h3",[e._v("グループ情報")]),n("p",[e._v("グループ名 : "+e._s(e.group.name))]),n("p",[e._v("管理者")]),n("ul",e._l(e.group.admins,(function(r,t){return n("li",{key:t},[e._v(" "+e._s(r)+" ")])})),0),n("p",[e._v("メンバー")]),n("ul",e._l(e.group.members,(function(r,t){return n("li",{key:t},[e._v(" "+e._s(r)+" ")])})),0),e.group.isAdmin?n("div",[n("p",[e._v("あなたは管理者です")])]):e._e()]):e._e(),!1===e.group.isJoin?n("div",[n("p",[e._v("現在、グループに所属していません。")]),n("div",{staticClass:"create-group"},[n("h3",[e._v("グループを作成する")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.groupName,expression:"input.groupName"}],attrs:{type:"text",placeholder:"作成するグループ名"},domProps:{value:e.input.groupName},on:{input:function(r){r.target.composing||e.$set(e.input,"groupName",r.target.value)}}}),n("button",{on:{click:e.createNewGroup}},[e._v("グループを作成する")])]),e._m(0)]):e._e()])},i=[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"joinGroup"},[n("h3",[e._v("グループに所属する")])])}];function u(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n("b0c0"),n("b64b"),n("a434");var a=n("fe4b"),o=n("4f60"),s=(n("2979"),{data:function(){return{user:{uid:""},group:{isJoin:!1,isAdmin:!1,name:"",members:[],admins:[]},input:{groupName:""}}},methods:{createNewGroup:function(){if(this.input.groupName){var e=o["a"].database(),r=e.ref("groups").push(),n=e.ref("users").child(this.user.uid),t=r.key;r.set({name:this.input.groupName,admins:u({},this.user.uid,!0),members:u({},this.user.uid,!0)}),n.update({group:t})}}},mounted:function(){var e=this;o["a"].initializeApp(a["a"]);var r=o["a"].auth().onAuthStateChanged((function(n){if(n){var t=o["a"].auth().currentUser,i=o["a"].database(),u=i.ref("users"),a=i.ref("users/".concat(t.uid,"/group"));e.user.uid=t.uid,a.on("value",(function(r){var n=r.val();if(n){var a=i.ref("groups/".concat(n));a.on("value",(function(r){var n=r.val();if(e.group.name=n.name,n.members[t.uid]){e.group.isAdmin=!!n.admins[t.uid];var i=Object.keys(n.members),a=Object.keys(n.admins);e.group.isJoin=!0,e.group.admins.splice(0);for(var o=0,s=a;o<s.length;o++){var c=s[o];n.admins[c]&&u.child(c).child("username").get().then((function(r){var n=r.val();n&&e.group.admins.push(n)})).catch((function(e){console.error(e)}))}e.group.members.splice(0);for(var p=0,l=i;p<l.length;p++){var d=l[p];n.members[d]&&u.child(d).child("username").get().then((function(r){var n=r.val();n&&e.group.members.push(n)})).catch((function(e){console.error(e)}))}}else e.group.isJoin=!1}))}else e.group.isJoin=!1}))}r()}))}}),c=s,p=n("2877"),l=Object(p["a"])(c,t,i,!1,null,null,null);r["default"]=l.exports},a434:function(e,r,n){"use strict";var t=n("23e7"),i=n("da84"),u=n("23cb"),a=n("5926"),o=n("07fa"),s=n("7b0b"),c=n("65f0"),p=n("8418"),l=n("1dde"),d=l("splice"),m=i.TypeError,f=Math.max,v=Math.min,g=9007199254740991,h="Maximum allowed length exceeded";t({target:"Array",proto:!0,forced:!d},{splice:function(e,r){var n,t,i,l,d,b,_=s(this),w=o(_),k=u(e,w),y=arguments.length;if(0===y?n=t=0:1===y?(n=0,t=w-k):(n=y-2,t=v(f(a(r),0),w-k)),w+n-t>g)throw m(h);for(i=c(_,t),l=0;l<t;l++)d=k+l,d in _&&p(i,l,_[d]);if(i.length=t,n<t){for(l=k;l<w-t;l++)d=l+t,b=l+n,d in _?_[b]=_[d]:delete _[b];for(l=w;l>w-t+n;l--)delete _[l-1]}else if(n>t)for(l=w-t;l>k;l--)d=l+t-1,b=l+n-1,d in _?_[b]=_[d]:delete _[b];for(l=0;l<n;l++)_[l+k]=arguments[l+2];return _.length=w-t+n,i}})},b64b:function(e,r,n){var t=n("23e7"),i=n("7b0b"),u=n("df75"),a=n("d039"),o=a((function(){u(1)}));t({target:"Object",stat:!0,forced:o},{keys:function(e){return u(i(e))}})}}]);
//# sourceMappingURL=chunk-5e97cb38.6740b202.js.map